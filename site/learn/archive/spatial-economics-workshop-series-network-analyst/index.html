
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Spatial Economics Workshop Series: Network Analyst - OARC Technology Sandbox</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-i-download-and-prepare-the-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OARC Technology Sandbox" class="md-header__button md-logo" aria-label="OARC Technology Sandbox" data-md-component="logo">
      
  <img src="../../../logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OARC Technology Sandbox
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spatial Economics Workshop Series: Network Analyst
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../work/" class="md-tabs__link">
        
  
    
  
  Work

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Learn

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../connect/" class="md-tabs__link">
          
  
    
  
  Connect

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../musings/" class="md-tabs__link">
        
  
    
  
  Musings

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OARC Technology Sandbox" class="md-nav__button md-logo" aria-label="OARC Technology Sandbox" data-md-component="logo">
      
  <img src="../../../logo.jpg" alt="logo">

    </a>
    OARC Technology Sandbox
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../work/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Work
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learn
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../connect/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Connect
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Connect
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connect/consult/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consult
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connect/where/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Where is the Sandbox
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../musings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Musings
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#part-i-download-and-prepare-the-data" class="md-nav__link">
    <span class="md-ellipsis">
      Part I. Download and prepare the data
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part I. Download and prepare the data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extract-california-roads" class="md-nav__link">
    <span class="md-ellipsis">
      Extract California roads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-the-counties-for-california" class="md-nav__link">
    <span class="md-ellipsis">
      Extract the counties for California.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-the-cities-for-california" class="md-nav__link">
    <span class="md-ellipsis">
      Extract the cities for California
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-in-the-zone-11" class="md-nav__link">
    <span class="md-ellipsis">
      Get in the Zone! (11)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-ii-calculating-cost" class="md-nav__link">
    <span class="md-ellipsis">
      Part II. Calculating Cost
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part II. Calculating Cost">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-disruption-on-the-network" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a disruption on the network
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-iii-creating-a-network-data-set" class="md-nav__link">
    <span class="md-ellipsis">
      Part III. Creating a Network Data Set
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part III. Creating a Network Data Set">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#take-a-break-while-the-network-data-set-builds" class="md-nav__link">
    <span class="md-ellipsis">
      Take a break while the Network Data Set builds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-iv-network-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Part IV. Network Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Part IV. Network Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pop-quiz-travel-to-which-cities-have-been-negatively-impacted-by-los-angeles-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Pop quiz: Travel to which cities have been negatively impacted by Los Angeles traffic?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment" class="md-nav__link">
    <span class="md-ellipsis">
      Assignment
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Spatial Economics Workshop Series: Network Analyst</h1>

<ul>
<li><a href="https://docs.google.com/document/d/11loPFABGybOtgTbNqU0SsOm3PkLQWK_RUq0-3bvuAjQ/edit#">Last week's assignment</a></li>
</ul>
<p><a class="glightbox" href="images/OD-Matrix-map-e1517532333380.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/OD-Matrix-map-e1517532333380.png" /></a></p>
<p>What is the optimal route to get to a group of locations? And what happens when there is a "disruption" on particular pathways? This workshop examines the amount of time (cost) that it takes to traverse a given network of roads between a series of provided locations.</p>
<h2 id="part-i-download-and-prepare-the-data">Part I. Download and prepare the data<a class="headerlink" href="#part-i-download-and-prepare-the-data" title="Permanent link">&para;</a></h2>
<p>First, download and unzip the states, county, and city geodatabase from our class server:</p>
<ul>
<li><a href="https://sandbox.idre.ucla.edu/Workshops/workshop2018.zip">Workshop Data Download Link</a></li>
</ul>
<p>The US Department of Transportation provides nationwide spatial data of our road network. Let's download their data to use in this workshop, where we will conduct a series of network analyses.</p>
<ul>
<li>Download new data set<ul>
<li><a href="https://www.fhwa.dot.gov/planning/processes/tools/nhpn/">Roads</a></li>
<li><a href="https://www.fhwa.dot.gov/planning/processes/tools/nhpn/2015/nhpnmetadata.txt">Metadata</a></li>
</ul>
</li>
</ul>
<p>[TBS_ALERT color="info" heading="What? Just California?"]For the purposes of this workshop, we will only use the road networks for California. Using the nationwide network would have been preferred, but given that larger datasets take much longer to run "geo" processes, we will first extract the roads for California.[/TBS_ALERT]</p>
<h3 id="extract-california-roads">Extract California roads<a class="headerlink" href="#extract-california-roads" title="Permanent link">&para;</a></h3>
<ol>
<li>Open <strong>ArcMap</strong></li>
<li>Add <strong>NHPNLine.shp</strong> and <strong>US_States</strong></li>
<li>Turn off <strong>NHPNLine</strong>, and highlight <strong>California</strong> (use the selection tool) <a class="glightbox" href="images/select-feature-tool-e1517358308800.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/select-feature-tool-e1517358308800.png" /></a></li>
<li>Go to <strong>Selection</strong>, <strong>Select by Location</strong>, <strong>select features from NHPLine</strong>, source layer: <strong>us_states</strong>, and check the "<strong>use selected features</strong>" <a class="glightbox" href="images/Save-selected-e1517354614265.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/Save-selected-e1517354614265.png" /></a></li>
<li>Right click on <strong>NHPNLine</strong>, <strong>Data</strong>, <strong>Export Data</strong>, put it in your geodatabase, and give it the filename <strong>ca_roads</strong> <a class="glightbox" href="images/export-data-ca-roads-e1517354783997.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/export-data-ca-roads-e1517354783997.png" /></a></li>
</ol>
<h3 id="extract-the-counties-for-california">Extract the counties for California.<a class="headerlink" href="#extract-the-counties-for-california" title="Permanent link">&para;</a></h3>
<ol>
<li>Add <strong>us_counties</strong> to ArcMap</li>
<li>Go to <strong>Selection</strong>, <strong>Select by Attributes</strong></li>
<li>The FIPS code for California is <strong>06</strong>. Enter the following SQL query and apply: <a class="glightbox" href="images/Select-by-Attribute-Counties-e1517436521502.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/Select-by-Attribute-Counties-e1517436521502.png" /></a></li>
<li>Right click on <strong>us_counties</strong>, <strong>data</strong>, <strong>export data</strong>, and save it as <strong>ca_counties</strong> in your geodatabase.</li>
</ol>
<h3 id="extract-the-cities-for-california">Extract the cities for California<a class="headerlink" href="#extract-the-cities-for-california" title="Permanent link">&para;</a></h3>
<p>By now you should have a handle on how to filter and create new spatial layers. Repeat the steps to generate ca_cities from the us_cities layer.</p>
<p>Close ArcMap. There is no need to save the project at this time.</p>
<h2 id="get-in-the-zone-11">Get in the Zone! (11)<a class="headerlink" href="#get-in-the-zone-11" title="Permanent link">&para;</a></h2>
<p>Before we begin to create a network dataset, we need to set the correct projection for our project. For any type of spatial analysis that requires geoprocessing, it is highly recommended to use a projected coordinate system, and to have every single layer in your project have the same projection.</p>
<ol>
<li>Open the search window, and enter "<strong>batch project</strong>"</li>
<li>Click on the <strong>Batch Project</strong> tool</li>
<li>Drag and drop the three California datasets into the the input feature class box</li>
<li>For Output Workspace, navigate to your <strong>workshop2018.gdb</strong> geodatabase</li>
<li>For Output Coordinate System, choose <strong>NAD 1983 UTM Zone 11N</strong> (type in the search box to find it)</li>
<li>Click <strong>OK <a class="glightbox" href="images/batch-project-utm-e1517506013123.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/batch-project-utm-e1517506013123.png" /></a></strong> </li>
<li>You should now have three new layers in your geodatabase. Rename them as:<ol>
<li>ca_cities_1 -&gt; <strong>ca_cities_utm</strong></li>
<li>ca_counties_1 -&gt; <strong>ca_counties_utm</strong></li>
<li>ca_roads_1 -&gt; <strong>ca_roads_utm</strong></li>
</ol>
</li>
</ol>
<h2 id="part-ii-calculating-cost">Part II. Calculating Cost<a class="headerlink" href="#part-ii-calculating-cost" title="Permanent link">&para;</a></h2>
<p>We now have all our data projected and ready to go. But before we do any network analysis, we want to create "cost" fields in our network dataset. Essentially, we want to measure cost as a factor of time. Faster roads, like interstate and freeways, will assume a lower cost of travel (less minutes), while slower roads, like arterial roads, will assume a higher cost (more minutes to travel).</p>
<p>Let's take a look at how the Department of Transportation classifies different roads on the network. The metadata is available on their website <a href="https://www.fhwa.dot.gov/planning/processes/tools/nhpn/2015/nhpnmetadata.txt">here</a>. Scroll down until you find the documentation on the FCLASS field. <a class="glightbox" href="images/FCLASS-documatation-e1517510992548.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/FCLASS-documatation-e1517510992548.png" /></a></p>
<p>In order to simplify our cost calculation, we will create our own reclassification using only 3 classes. To do so, we will group all freeways and interstates into one class, arterial roads in another, and all the remaining roads as a third class.</p>
<ol>
<li>Open a new ArcMap project</li>
<li>Add <strong>ca_roads_utm</strong> (the one that has the UTM projection)</li>
<li>Right click on <strong>ca_roads_utm</strong> and go to properties and click on the <strong>Fields</strong> tab</li>
<li>Deselect all the fields except for <strong>MILES</strong> and <strong>FCLASS</strong></li>
<li>Open its attribute table</li>
<li>Add a new field, and name it <strong>NewClass</strong>, and give it a type <strong>Short Integer</strong>.</li>
<li>Once created, right click on the header, and select <strong>Field Calculator</strong>.</li>
<li>Make sure the parser is set to <strong>VB Script</strong></li>
<li>Check the <strong>Show Codeblock</strong> box</li>
<li>
<p>Enter the following formula in the <strong>Pre-Logic Script Code</strong></p>
<p>dim n
if [FCLASS] = 1 or [FCLASS] = 11 or [FCLASS] = 12 then
    n = 1
elseif [FCLASS] = 2 or [FCLASS] = 6 or [FCLASS] = 14 or [FCLASS] = 16 then
    n = 2
else
    n = 3
end if</p>
</li>
<li>
<p>Enter "<strong>n</strong>" in the second box labeled <strong>NewClass=</strong> <a class="glightbox" href="images/Field-Calculator-NewClass-e1517356709530.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/Field-Calculator-NewClass-e1517356709530.png" /></a></p>
</li>
<li>Now let's assign speed limits to each class. Create a new field, and title it <strong>Speed</strong> of type <strong>Short Integer</strong>.</li>
<li>
<p>In the field calculator, enter the following VB script:</p>
<p>dim n
if [NewClass] = 1 then
    n = 60
elseif [NewClass] = 2 then
    n = 40
elseif [NewClass] = 3 then
    n = 20
end if</p>
</li>
<li>
<p>Now add another field, and name it <strong>Time_Minutes</strong>.</p>
</li>
<li>Give it a type <strong>Float</strong>.</li>
<li>
<p>In the field calculator, enter the following formula:</p>
<p>[MILES]/ [Speed]*60</p>
</li>
</ol>
<h3 id="creating-a-disruption-on-the-network">Creating a disruption on the network<a class="headerlink" href="#creating-a-disruption-on-the-network" title="Permanent link">&para;</a></h3>
<p>We have now created a cost field in terms of how many minutes it costs to travel each segment of our network. Let's presume, however, that a disruption has occurred, and certain segments of our network incur a 10% increase in cost. To make matters simple for our workshop, let's presume that all roads within Los Angeles County will incur this additional cost of 10%. In other words, it takes 10% longer to travel roads in Los Angeles County as compared to any other roads on the network.</p>
<ol>
<li>Create a new field for our disrupted cost, and name it <strong>Time_Minutes_LA</strong></li>
<li>Give it a type <strong>Float</strong></li>
<li>In the field calculator, copy the values from <strong>Time_Minutes</strong> <a class="glightbox" href="images/field-calculator-time_minutes-e1517518909130.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/field-calculator-time_minutes-e1517518909130.png" /></a></li>
<li>Now select only the roads that are within LA County.</li>
<li>Use the selection tool to highlight LA County <a class="glightbox" href="images/Highlight-LA-County-e1517519121551.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/Highlight-LA-County-e1517519121551.png" /></a></li>
<li>Go to <strong>Selection</strong>, <strong>Select by Location</strong>.</li>
<li>Select features from <strong>ca_roads_utm</strong> that <strong>intersect</strong> with <strong>selected features</strong> (checkbox) from <strong>ca_counties_utm</strong> <a class="glightbox" href="images/Select-roads-in-LA-County-e1517519385933.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/Select-roads-in-LA-County-e1517519385933.png" /></a></li>
<li>In the attribute table for the ca_roads_utm, notice that 8878 out of 61,973 segments are selected. Click on the "Show selected records button" <a class="glightbox" href="images/selected-roads-e1517519585261.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/selected-roads-e1517519585261.png" /></a></li>
<li>Click on the header for Time_Minutes_LA and bring up the field calculator.</li>
<li>Add 10% cost to the selected LA County Roads <a class="glightbox" href="images/adding-10-disruption-cost-e1517519677577.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/adding-10-disruption-cost-e1517519677577.png" /></a></li>
<li>Save your project as <strong>NetworkWorkshop.mdb</strong></li>
<li>Close ArcMap</li>
</ol>
<p>We now have two cost fields in our network data. Next, we will create a network dataset that allows ArcMap to run analyses.</p>
<h2 id="part-iii-creating-a-network-data-set">Part III. Creating a Network Data Set<a class="headerlink" href="#part-iii-creating-a-network-data-set" title="Permanent link">&para;</a></h2>
<ol>
<li>Open ArcCatalog and locate your geodatabase.</li>
<li>Right click on the geodatabase and click "New" then "Feature Data Set" <a href="https://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2018/01/2018-01-31-17_01_33-2018-01-31-16_40_58-Layer-Properties.png-@-116-Layer-2-RGB_8-_.png"><img alt="" src="images/2018-01-31-17_01_33-2018-01-31-16_40_58-Layer-Properties.png-@-116-Layer-2-RGB_8-_-e1517447015537.png" /></a></li>
<li>Add a new <strong>feature dataset</strong> and call it "<strong>ca_transportation</strong>"</li>
<li>Give it a NAD 1983 UTM Zone 11N coordinate system.</li>
<li>Ignore the other options, and finish.</li>
<li>Drag the ca_roads_utm layer into the ca_transportation feature dataset you just created <a class="glightbox" href="images/drag-roads-to-feature-e1517520307186.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/drag-roads-to-feature-e1517520307186.png" /></a></li>
<li>Right click on <strong>ca_transportation</strong>, <strong>New</strong>, <strong>Network Dataset</strong><a href="https://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2018/01/2_networkdataset-e1517447394919.png"><img alt="" src="images/2_networkdataset-e1517447394919.png" /></a></li>
<li>Proceed through the New Network Dataset Wizard:<ol>
<li>Give it a name <a href="https://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2018/01/3_New-Network-Dataset-e1517447451780.png"><img alt="" src="images/3_New-Network-Dataset-e1517447451780-1024x988.png" /></a></li>
<li>Choose <strong>ca_roads_utm</strong> as the feature class participating in the network dataset.</li>
<li>Choose to model turns in the network.</li>
<li>Choose "None" for elevation modeling.</li>
<li>Add an attribute for the network dataset called "Minutes"</li>
<li>Make sure the units are minutes in the dialogue box.</li>
<li>In evaluators, make sure the that "Type" is Field and that the Value is "Time_Minutes"</li>
<li>Duplicate the "Minutes" field</li>
<li>Change the value from "Time_Minutes" to "Time_Minutes_LA"; this will be used to model traffic in LA.</li>
<li>Rename "Minutes_2" to "Minutes_LA"</li>
</ol>
</li>
<li>Title the network dataset as "ca_transportation_ND"</li>
<li>Choose "yes" to build the Network Dataset.</li>
</ol>
<h4 id="take-a-break-while-the-network-data-set-builds">Take a break while the Network Data Set builds<a class="headerlink" href="#take-a-break-while-the-network-data-set-builds" title="Permanent link">&para;</a></h4>
<h2 id="part-iv-network-analysis">Part IV. Network Analysis<a class="headerlink" href="#part-iv-network-analysis" title="Permanent link">&para;</a></h2>
<ol>
<li>Close ArcCatalog and re-open ArcMap</li>
<li>Add the following layers into your map:<ul>
<li><strong>ca_cities_utm</strong></li>
<li><strong>ca_counties_utm</strong></li>
<li>Go into the "<strong>ca_transportation feature class</strong>" and add:<ul>
<li>"<strong>ca_transportation_ND</strong>"<ul>
<li>Do not add all features that participate in the network database as we don't really need them.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Go to "<strong>Customize</strong>" and then "<strong>Extensions</strong>".</li>
<li>Make sure the Network Analyst Extension has a check mark next to it, indicating that it is on.</li>
<li>Right click anywhere near the toolbar and click on "<strong>Network Analyst</strong>" to turn on the <strong>Network Analyst Toolbar:</strong></li>
<li>Click the <strong>Network Analysis Window Icon</strong>: <a class="glightbox" href="images/network-analyst-toolbar-e1517528424491.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/network-analyst-toolbar-e1517528424491.png" /></a></li>
<li>Our task will be to calculate an Origin-Destination Cost Matrix from the most populous city in California to the next 10 populous cities.</li>
<li>Click the <strong>Network Analyst</strong> dropdown and select "<strong>New OD Cost Matrix</strong>"</li>
<li>New layers should propagate in both the Network Analysis window and the Table of Contents for the project.</li>
<li>Open the attribute table for <strong>ca_cities_utm</strong> and order by <strong>population_2007</strong>.</li>
<li>Select the highest value, which happens to be <strong>Los Angeles.</strong></li>
<li>With the city highlighted, we will right click on "<strong>Origins</strong>" and click "<strong>Load locations</strong>" <a class="glightbox" href="images/load-locations-e1517528584980.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/load-locations-e1517528584980.png" /></a></li>
<li>Return to the attribute table and choose the next 10 cities: <a class="glightbox" href="images/next-10-cities-e1517528651541.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/next-10-cities-e1517528651541.png" /></a></li>
<li>Right click on Destinations:</li>
<li>Load the data in. <a class="glightbox" href="images/origin-destination-list-e1517528744567.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/origin-destination-list-e1517528744567.png" /></a></li>
<li>Close the attribute table.</li>
<li>Go back to the Network Analyst toolbar and click on "Solve" <a class="glightbox" href="images/solve-button-e1517528817343.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/solve-button-e1517528817343.png" /></a></li>
<li>The Origin-Destinations will be calculated.</li>
<li>Right click on "<strong>Lines</strong>" and open the attribute table for the to see to OD-Matrix.</li>
<li>Export as a csv file to save it out of ArcMap.</li>
<li>To simulate Los Angeles traffic, we will use the <strong>Minutes_LA</strong> field.</li>
<li>First, let's copy the OD Matrix we just made. Right click on <strong>OD Cost Matrix</strong> in the table of contents and click <strong>Copy</strong></li>
<li>Right click on the <strong>Layers</strong> and choose <strong>Paste Layer</strong></li>
<li>You should rename the layer to <strong>OD Cost Matrix LA</strong></li>
<li>Now on the Network Analyst window click on <strong>OD Matrix Properties <a class="glightbox" href="images/OD-Matrix-Properties-button-e1517529052758.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/OD-Matrix-Properties-button-e1517529052758.png" /></a></strong> </li>
<li>Switch to the "Analysis Settings" tab</li>
<li>Choose Minutes_LA <a class="glightbox" href="images/choose-minutes-LA-for-cost-e1517529152724.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="images/choose-minutes-LA-for-cost-e1517529152724.png" /></a></li>
<li>Choose to solve the analysis again.</li>
<li>Open the attribute table for the lines.</li>
<li>Compare the two OD-Matrices.</li>
</ol>
<h4 id="pop-quiz-travel-to-which-cities-have-been-negatively-impacted-by-los-angeles-traffic">Pop quiz: Travel to which cities have been negatively impacted by Los Angeles traffic?<a class="headerlink" href="#pop-quiz-travel-to-which-cities-have-been-negatively-impacted-by-los-angeles-traffic" title="Permanent link">&para;</a></h4>
<h2 id="assignment">Assignment<a class="headerlink" href="#assignment" title="Permanent link">&para;</a></h2>
<p>Choose a topic of interest that can be visualized as a county based US map from data that is available on Social Explorer. Download your data of choice from Social Explorer, join it to the county layer provided in this workshop, and symbolize it to create a choropleth map. Add a short paragraph description that describes the map.</p>
<p>[TBS_ALERT color="danger" heading="Submit your map!"]Post your map on this <strong><a href="https://docs.google.com/document/d/11loPFABGybOtgTbNqU0SsOm3PkLQWK_RUq0-3bvuAjQ/edit?usp=sharing">Google Doc</a></strong>. Add a title, your name, your map image, and your paragraph.[/TBS_ALERT]</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../../js/getdata.js"></script>
      
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>