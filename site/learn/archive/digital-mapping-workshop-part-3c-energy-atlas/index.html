
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.33">
    
    
      
        <title>Digital Mapping Workshop - Part 3b:  Energy Atlas - &#8203;</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-la-county-energy-atlas" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="&amp;#8203;" class="md-header__button md-logo" aria-label="&#8203;" data-md-component="logo">
      
  <img src="../../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            &#8203;
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Digital Mapping Workshop - Part 3b:  Energy Atlas
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Learn

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../work/" class="md-tabs__link">
        
  
    
  
  Work

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../connect/" class="md-tabs__link">
          
  
    
  
  Connect

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../musings/" class="md-tabs__link">
        
  
    
  
  Musings

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="&amp;#8203;" class="md-nav__button md-logo" aria-label="&#8203;" data-md-component="logo">
      
  <img src="../../../logo.png" alt="logo">

    </a>
    &#8203;
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Learn
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../work/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Work
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../connect/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Connect
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Connect
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connect/consult/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consult
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connect/where/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Where is the Sandbox?
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../musings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Musings
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-la-county-energy-atlas" class="md-nav__link">
    <span class="md-ellipsis">
      The LA County Energy Atlas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Map Framework
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thematic-layer" class="md-nav__link">
    <span class="md-ellipsis">
      Thematic Layer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base-maps" class="md-nav__link">
    <span class="md-ellipsis">
      Base Maps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Digital Mapping Workshop - Part 3b:  Energy Atlas</h1>

<h2 id="the-la-county-energy-atlas">The LA County Energy Atlas<a class="headerlink" href="#the-la-county-energy-atlas" title="Permanent link">&para;</a></h2>
<ul>
<li>Ground up research using address level energy data (electricity and natural gas)</li>
<li>Who uses energy where to do what?</li>
<li>Tools to explore data and provide resources to decision makers</li>
</ul>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/energy-atlas-map.png"><img alt="energy-atlas-map" src="images/energy-atlas-map-650x480.png" /></a></p>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/energy-atlas-table.png"><img alt="energy-atlas-table" src="images/energy-atlas-table-650x480.png" /></a></p>
<h2 id="map-framework">Map Framework<a class="headerlink" href="#map-framework" title="Permanent link">&para;</a></h2>
<p>The <a href="http://leafletjs.com/">Leaflet</a> library handles the map rendering in the browser.  Designed to be fast and work well on mobile devices and across browsers.  Also considered were the Google Maps API (not fully open source) and OpenLayers (between development stages when this project started).</p>
<h2 id="thematic-layer">Thematic Layer<a class="headerlink" href="#thematic-layer" title="Permanent link">&para;</a></h2>
<p>The choropleth map that shows consumption variables for cities or neighborhoods across the county.  Experimented with 3 approaches before settling on the current setup.</p>
<p><strong>1) GeoJSON</strong></p>
<p>Most responsive and simplest, but can only handle so much data since the drawing is done in the browser.  Snappy performance, but the browser will slow down or crash ("script not responding") if there are too many features or geometry is too complex.</p>
<p>Works well for our previous map - <a href="http://sustainablecommunities.environment.ucla.edu/maproom/index.html">http://sustainablecommunities.environment.ucla.edu/maproom/index.html</a> - which is for a smaller study area with mostly rectangular geographies, though we still had to do a lot of trimming and pruning to the data file to get consistently good performance.</p>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/electricity-map.png"><img alt="electricity-map" src="images/electricity-map-650x481.png" /></a></p>
<p><strong>2) TopoJSON</strong></p>
<p>An extension of GeoJSON that encodes topography (collapses borders).  It's just as responsive as GeoJSON but has smaller file sizes and can handle more features.  Still has trouble with lots of complicated geometries with lots of vertices.</p>
<p>You can use packaged scripts to simplify geometry based on scale and complexity of the shapes, but be careful not to oversimplify.  This image from an earlier experiment shows how a shape can be distorted.</p>
<p>Neighborhood of Walnut (Actual shape left, oversimplified right - see how the right hand version misses detailed geometry).</p>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/oversimplification.png"><img alt="oversimplification" src="images/oversimplification-650x310.png" /></a></p>
<p><strong>3) Web Map Service</strong></p>
<p>A WMS is an open standard for displaying a map layer as a series of tiled images  (Leaflet and others provide methods for adding them to a web map).  We use <a href="http://mapserver.org/">MapServer</a>, an open source platform for creating WMS and cached map tiles.  Key points are speed of loading and scalability - we can add much more data and more granular geographies and still maintain the same performance level as we switch between variables to show.</p>
<p>Using this approach requires server-side programming.  For Ubuntu users, the wonderful UbuntuGIS project has all the needed packages and makes it easy to install and get started.</p>
<p>Tiled Maps:</p>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/tiled-map-res.png"><img alt="tiled-map-res" src="images/tiled-map-res.png" /></a></p>
<p>[residential consumption by city]</p>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/tiled-map-comm.png"><img alt="tiled-map-comm" src="images/tiled-map-comm.png" /></a></p>
<p>[commercial consumption by city]</p>
<h2 id="base-maps">Base Maps<a class="headerlink" href="#base-maps" title="Permanent link">&para;</a></h2>
<p>TileMill is a great resource for designing map layers based on public or your own data: <a href="https://www.mapbox.com/tilemill/">https://www.mapbox.com/tilemill/</a>.  It's especially good for the artistically inclined (can do filters, fades, dash patterns, etc).</p>
<p>Once you create a project, you can export the tiles in MB Tiles format and serve from a paid MapBox account or from your own server.  In our case, the MapServer installation is also capable of serving MB Tiles.</p>
<p>There are also lots of free base maps out there to use - for example the Esri satellite layer can easily serve as a base map to any project at no cost.  See all the Esri options at <a href="http://www.esri.com/software/arcgis/arcgisonline/maps/maps-and-map-layers">http://www.esri.com/software/arcgis/arcgisonline/maps/maps-and-map-layers</a></p>
<p><a href="http://sandbox.idre.ucla.edu/sandbox/wp-content/uploads/2015/04/esri-basemaps.png"><img alt="esri-basemaps" src="images/esri-basemaps-629x650.png" /></a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.af256bd8.min.js"></script>
      
        <script src="../../../js/getdata.js"></script>
      
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>